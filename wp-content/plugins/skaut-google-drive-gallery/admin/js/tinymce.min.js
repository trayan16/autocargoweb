"use strict";function isError(t){return t.error!==undefined}jQuery(document).ready(function(a){var d=[];function t(){var t='<div id="sgdg-tinymce-overflow"><table id="sgdg-tinymce-table" class="widefat"><thead><tr><th class="sgdg-tinymce-path">'+sgdgTinymceLocalize.root_name+'</th></tr></thead><tbody id="sgdg-tinymce-list"></tbody><tfoot><tr><td class="sgdg-tinymce-path">'+sgdgTinymceLocalize.root_name+'</td></tr></tfoot></table></div><div class="sgdg-tinymce-footer"><a id="sgdg-tinymce-insert" class="button button-primary">'+sgdgTinymceLocalize.insert_button+"</a></div>";a("#sgdg-tinymce-modal").html(t),a("#sgdg-tinymce-insert").click(function(){!function t(){a("#sgdg-tinymce-insert").attr("disabled")||(tinymce.activeEditor.insertContent('[sgdg path="'+d.join("/")+'"]'),tb_remove())}()})}function c(){d=d.slice(0,d.indexOf(a(this).data("name"))+1),i()}function s(){var t=a(this).text();".."===t?d.pop():d.push(t),i()}function i(){a("#sgdg-tinymce-list").html(""),a("#sgdg-tinymce-insert").attr("disabled","disabled"),a.get(sgdgTinymceLocalize.ajax_url,{_ajax_nonce:sgdgTinymceLocalize.nonce,action:"list_gallery_dir",path:d},function(t){isError(t)?function e(t){var i='<div class="notice notice-error"><p>'+t+"</p></div>";a("#TB_ajaxContent").html(i)}(t.error):function n(t){var i="";a("#sgdg-tinymce-insert").removeAttr("disabled"),0<d.length&&(i+='<tr><td class="row-title"><label>..</label></td></tr>');for(var e=0;e<t.length;e++)i+='<tr class="',(0===d.length&&1==e%2||0<d.length&&0==e%2)&&(i+="alternate"),i+='"><td class="row-title"><label>'+t[e]+"</label></td></tr>";for(a("#sgdg-tinymce-list").html(i),i="<a>"+sgdgTinymceLocalize.root_name+"</a>",e=0;e<d.length;e++)i+=' > <a data-name="'+d[e]+'">'+d[e]+"</a>";a(".sgdg-tinymce-path").html(i),a(".sgdg-tinymce-path a").click(c),a("#sgdg-tinymce-list label").click(s)}(t.directories)})}function e(){t(),tb_show(sgdgTinymceLocalize.dialog_title,"#TB_inline?inlineId=sgdg-tinymce-modal"),d=[],i()}!function n(){a("#sgdg-tinymce-button").click(e),a("body").append('<div id="sgdg-tinymce-modal"></div>')}()});